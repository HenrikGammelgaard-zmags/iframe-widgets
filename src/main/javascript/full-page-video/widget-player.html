<!DOCTYPE html>
<html>
    <head>
        <title>Widget with player</title>
        <script src="https://www.youtube.com/player_api"></script>
        <script src="WidgetBus.js"></script>
        <script>
            var queryParameters = (function () {
                var queryString = window.location.search,
                        output = {};

                if (queryString === "") {
                    return output;
                }

                var parameters = queryString.substr(1).split("&");
                for (var i = 0; i < parameters.length ; i++) {
                    var keyValue = parameters[i].split("=");
                    if (keyValue.length === 2) {
                        output[keyValue[0]] = decodeURIComponent(keyValue[1]);
                    } else {
                        output[keyValue[0]] = "";
                    }
                }

                return output;
            }());


            function createYtPlayer() {
                var ytPlayer = new YT.Player('ytplayer', {
                    height: window.innerHeight,
                    width: window.innerWidth,
                    videoId: queryParameters.videoId,
                    // https://developers.google.com/youtube/player_parameters#Parameters
                    playerVars: {
                        controls: 0,
                        rel: 0,
                        showinfo: 0,
                        origin: window.location.origin
                    }
                });

                window.onresize = function () {
                    ytPlayer.setSize(window.innerWidth, window.innerHeight);
                };

                return ytPlayer;
            }

            // Somehow called by Youtube API code
            function onYouTubePlayerAPIReady() {
                // 1. register player widget ready
                var widgetBus = WidgetBus.initialize();
                widgetBus.registerPlayerWidget("x", createYtPlayer);
            }
        </script>
    </head>
    <body style="margin: 0;">
        <div id="ytplayer"></div>
    </body>
</html>